---
title: "Global Component | Messenger Docs"
source: downloaded_docs\docs\advanced\gc
---

On this page

# Global Component

Although portable components and user components can be used to handle some logic, they are scene-specific, i.e. they cannot run across multiple scenes.

We need a way to run components inside the core that could manipulate core runtime data (like the running scene). **Global components** are a general model defined as:

```
type alias GCCommonData userdata scenemsg =  
    MAbstractScene userdata scenemsg  
  
type alias GCBaseData =  
    { dead : Bool  
    , postProcessor : Renderable -> Renderable  
    }  
  
type alias GCMsg =  
    Json.Decode.Value  
  
type alias GCTarget =  
    String  
  
type alias ConcreteGlobalComponent data userdata scenemsg =  
    { init : GlobalComponentInit userdata scenemsg data  
    , update : GlobalComponentUpdate userdata scenemsg data  
    , updaterec : GlobalComponentUpdateRec userdata scenemsg data  
    , view : GlobalComponentView userdata scenemsg data  
    , id : GCTarget  
    }  
  
type alias AbstractGlobalComponent userdata scenemsg =  
    MAbstractGeneralModel (GCCommonData userdata scenemsg) userdata GCTarget GCMsg GCBaseData scenemsg  

```

Differing from user components and portable components, global components have fixed `msg` and `target` types, which are `Value` and `String`. The common data is the running scene, while the base data is a record of `dead` and `postProcessor`. Global components can communicate with each other via the limited `Value` message. However, you can use whatever data type you want to design the data of the global component and initialize it with any data.

You may load the global components either at the beginning of the game or during runtime via an `SOMMsg`. To load a global component at the beginning, edit `GlobalComponents.elm`:

```
allGlobalComponents : List (GlobalComponentStorage UserData SceneMsg)  
allGlobalComponents =  
    [ FPS.genGC (FPS.InitOption 20) Nothing  
    ]  

```

To load, unload, or communicate with global components at runtime, users could use these two `SOMMsg`s:

```
type SceneOutputMsg scenemsg userdata  
    ...  
    | SOMLoadGC (GlobalComponentStorage userdata scenemsg)  
    | SOMUnloadGC GCTarget  
    | SOMCallGC (List ( GCTarget, GCMsg ))  

```

Global components will update before the scene and will render after the scene. They can remove themselves by changing `dead` to `True` in base data. Besides, global components may post-process the `Renderable` result generated by the scene by adding a `PostProcessor: Renderable -> Renderable` in the `postProcessor` field of the base data.

There are some global components in the `messenger-extra` library, including `FPS` and `Transition`. Users can read the source code of those two global components to understand how global components work.

## FPS[​](#fps "Direct link to FPS")

This is a global component to show the Frames Per Second (FPS) value on the screen. It stores the last 10 values of `delta` every `Tick` event and calculates the average to determine the FPS. To use `FPS`, add it in `GlobalComponents.elm`.

Its generator is:

```
genGC : InitOption -> Maybe GCTarget -> GlobalComponentStorage userdata scenemsg  

```

`InitOption` contains some rendering options. `Maybe GCTarget` is the name of the component. Leave `Nothing` to use the default `fps` name.

## Transition[​](#transition "Direct link to Transition")

First, let's take a look at the concepts of transition.

Transition has "two stages":

1. From the old scene to the transition scene
2. From the transition scene to the new scene

It is defined by:

```
type alias Transition =  
    { currentTransition : Int  
    , outT : Int  
    , inT : Int  
    , outTrans : SingleTrans  
    , inTrans : SingleTrans  
    }  

```

- `outT` is the time (in milliseconds) of the first stage
- `inT` is the time of the second stage
- `outTrans`: the `SingleTrans` of the first stage
- `inTrans`: the `SingleTrans` of the second stage

The real transition effect is implemented in `SingleTrans`:

```
type alias SingleTrans =  
    InternalData -> Renderable -> Float -> Renderable  

```

The `Renderable` argument is the `view` of the next scene. The `Float` argument is the current progress of the transition. It is a value from 0 to 1. 0 means the transition starts, and 1 means the transition ends.

To generate a full transition, use `genTransition`:

```
genTransition : ( SingleTrans, Duration ) -> ( SingleTrans, Duration ) -> Maybe TransitionOption -> Transition  

```

`TransitionOption` is some option for transition. It is:

```
type alias TransitionOption =  
    { mix : Bool  
    }  

```

`mix` indicates using the mixed transition mode. There are two transition modes. Mixed mode means during transition, two scenes are running at the same time. Sequential mode means the second scene will run after the first scene finishes transition.

To actually use transition, you need to load the global component.

The `genGC` function requires an `InitOption` to initialize:

```
type alias InitOption scenemsg =  
    { transition : Transition  
    , scene : ( String, Maybe scenemsg )  
    , filterSOM : Bool  
    }  

```

The `Transition` can be generated by `genTransition`, `scene` is the scene you want to make the transition to, and `filterSOM` indicates whether some `SOMMsg`s should be blocked. If users choose to block `SOMMsg`, then `SOMChangeScene` and `SOMGCLoad` will not be filtered out.

Now let's take `Fade` transition as an example to explain how to use transition when changing the scene.

### Black Screen Transition[​](#black-screen-transition "Direct link to Black Screen Transition")

Consider a common scenario when a scene A ends. The user wants it to first fade out to a black screen and then fade in the next scene B.

![](data:image/jpeg;base64,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)

Then we emit the following `SOMMsg` in A's `update`:

```
SOMLoadGC (Transition.genGC (Transition.InitOption (genTransition ( fadeOutBlack, Duration.seconds 5 ) ( fadeInBlack, Duration.seconds 3 ) Nothing) ( "B", Nothing ) True) Nothing)  

```

5 is the fade-out time and 3 is the fade-in time.

### Direct Transition[​](#direct-transition "Direct link to Direct Transition")

Users may want to directly transition to the next scene without the black screen.

This is possible by using `nullTransition` and `fadeInWithRenderable` functions.

![](data:image/jpeg;base64,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)

Since the second scene always exists behind the transition scene during the transition, if the original scene is transparent, the effect will be quite strange. To avoid this, add a white background to the scene (or layer):

```
view env data =  
    group []  
        [ coloredBackground Color.white env.globalData  
        ...  
        ]  

```

Then emit this `SOMMsg`:

```
SOMLoadGC (Transition.genGC (Transition.InitOption (genTransition ( nullTransition, Duration.seconds 0 ) ( fadeInWithRenderable <| view env data, Duration.seconds 3 ) Nothing) ( "B", Nothing ) True) Nothing)  

```

### Mixed Transition[​](#mixed-transition "Direct link to Mixed Transition")

We can do transition in mixed mode:

```
SOMLoadGC (Transition.genGC (Transition.InitOption (genTransition ( fadeOutTransparent, Duration.seconds 1 ) ( fadeInTransparent, Duration.seconds 1 ) (Just <| TransitionOption True)) ( "B", Nothing ) True) Nothing)  

```

The result is "A" is fading out while "B" is fading in. Two scenes are running at the same time. Scene "A" could still receive user events and send `SOMMsg`s.

The examples are [here](https://github.com/linsyking/messenger-core/blob/master/test/src/Scenes/Home2/Model.elm).

### Transition Implementing[​](#transition-implementing "Direct link to Transition Implementing")

Let's see how `fadeIn` and `fadeOut` are implemented in the core. Users can follow this to design their own transitions.

```
fadeIn : Color -> SingleTrans ls  
fadeIn color gd rd v =  
    group []  
        [ rd  
        , shapes [ fill color, alpha (1 - v) ]  
            [ rect gd ( 0, 0 ) ( gd.virtualWidth, gd.virtualHeight )  
            ]  
        ]  
  
fadeOut : Color -> SingleTrans ls  
fadeOut color gd rd v =  
    group []  
        [ rd  
        , shapes [ fill color, alpha v ]  
            [ rect gd ( 0, 0 ) ( gd.virtualWidth, gd.virtualHeight )  
            ]  
        ]  

```

The common pattern is to put the next scene as the background and use an "alpha" value to control the transition scene.

tip

See [demo](https://github.com/elm-messenger/messenger-core/blob/main/test/src/Scenes/Transition/Model.elm).

## Asset Loading[​](#asset-loading "Direct link to Asset Loading")

This GC is used to show an asset loading scene when there is a resource loading.

Currently no options are required.

- [FPS](#fps)
- [Transition](#transition)
  - [Black Screen Transition](#black-screen-transition)
  - [Direct Transition](#direct-transition)
  - [Mixed Transition](#mixed-transition)
  - [Transition Implementing](#transition-implementing)
- [Asset Loading](#asset-loading)